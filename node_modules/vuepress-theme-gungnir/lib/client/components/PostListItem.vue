<template>
  <div class="post-item">
    <div class="post-item__img" @click="$router.push(item.path)">
      <img :src="withBase(item.info.headerImage)" />
    </div>
    <RouterLink :to="item.path" class="post-item__title">
    <div class="else">
      
        <h2>
          {{ item.info.title }}
        </h2>
        <p class="post-item__date">
        <span>üóìÔ∏è&ensp;{{ item.info.date ? formateDateString(item.info.date) : "" }}</span>
      </p>
        <h3 v-if="item.info.subtitle">
          <!-- <VIcon name="fc-next"/> -->
          <span>üìñ&ensp;{{ item.info.subtitle }}</span>
        </h3>      
      <div
        class="post-item__content"
        v-html="getExcerpt(item.info.excerpt || '')"
        />
    </div>
  </RouterLink>
  </div>
</template>

<script setup lang="ts">
import { withBase } from "@vuepress/client";
import type { PropType } from "vue";
import type { GungnirThemePostData } from "../../shared";
import { formateDateString } from "../utils";

import { OhVueIcon, addIcons } from "oh-vue-icons";
import { MdEditcalendarRound, FcNext } from "oh-vue-icons/icons";
addIcons(MdEditcalendarRound, FcNext);

defineProps({
  item: {
    type: Object as PropType<GungnirThemePostData>,
    required: true
  }
});

const getExcerpt = (excerpt: string) => {
  return excerpt
    .replace(/<RouterLink to/g, "<a href")
    .replace(/<\/RouterLink>/g, "</a>");
};
</script>
