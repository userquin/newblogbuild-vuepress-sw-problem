"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resolveWebpackConfig = void 0;
const webpack_merge_1 = require("webpack-merge");
const resolveWebpackConfig = ({ config, options, isServer, isBuild, }) => {
    // allow modifying webpack config via `chainWebpack`
    options.chainWebpack?.(config, isServer, isBuild);
    // generate webpack config from webpack-chain
    const webpackConfig = config.toConfig();
    // allow modifying webpack config via `configureWebpack`
    const configureWebpackResult = options.configureWebpack?.(webpackConfig, isServer, isBuild);
    // if `configureWebpack` returns a configuration object,
    // use webpack-merge to merge it
    if (configureWebpackResult) {
        return (0, webpack_merge_1.merge)(webpackConfig, configureWebpackResult);
    }
    return webpackConfig;
};
exports.resolveWebpackConfig = resolveWebpackConfig;
